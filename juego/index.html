<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>¬°Juega! ‚Äî Wordle Felino ‚Äî GatoHogar</title>
    <meta name="description" content="¬°Adivin√° el nombre del gato en 6 intentos! El Wordle felino de GatoHogar.">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link
        href="https://fonts.googleapis.com/css2?family=Lilita+One&family=Nunito:ital,wght@0,400;0,600;0,800;0,900;1,400;1,800&family=Permanent+Marker&display=swap"
        rel="stylesheet">
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Vue.js CDN -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <!-- JS compartido y configuraci√≥n -->
    <script src="../src/js/globales.js"></script>
    <!-- Base de datos de gatos -->
    <script src="../src/js/datos-gatos.js"></script>
    <!-- L√≥gica del juego -->
    <script src="../src/js/juego.js" defer></script>
    <!-- Estilos propios -->
    <link rel="stylesheet" href="../src/css/estilos.css">

</head>

<body>
    <div id="app">
        <componente-navbar></componente-navbar>

        <main class="min-h-[calc(100vh-7.5rem)] bg-crema py-10 px-5 flex flex-col items-center">
            <!-- T√≠tulo -->
            <div class="font-[Permanent_Marker] text-[clamp(1.75rem,5vw,2.75rem)] text-oxido text-center mb-1.5">üêæ
                Wordle
                Felino</div>
            <div class="text-[0.9375rem] text-gris font-bold text-center mb-7">Adivin√° el nombre del gato en {{
                maxIntentos
                }} intentos</div>

            <!-- Ficha del gato ‚Äî se revela al ganar o perder -->
            <div v-if="juegoTerminado"
                class="my-6 bg-blanco border-[4px] border-negro rounded-[1.5rem] shadow-[8px_8px_0_#1C1410] overflow-hidden max-w-[23.75rem] md:max-w-[50rem] w-full transition-all duration-500 md:flex md:flex-row"
                :class="ganado ? 'rotate-1' : '-rotate-1'">

                <!-- Imagen del gato -->
                <div
                    class="h-[12.5rem] md:h-auto md:w-[45%] bg-crema flex items-center justify-center text-[5rem] relative overflow-hidden shrink-0 border-b-[4px] md:border-b-0 md:border-r-[4px] border-negro">
                    <template v-if="gatoActual.imagen">
                        <img :src="PREFIJO_RUTA_GLOBAL + gatoActual.imagen" :alt="gatoActual.nombre"
                            class="w-full h-full object-cover">
                    </template>
                    <template v-else>
                        {{ gatoActual.emoji }}
                    </template>
                    <span
                        class="absolute top-3 right-3 text-xs font-black uppercase tracking-wider px-3 py-1 rounded-full border-[2px] border-negro shadow-[2px_2px_0_#1C1410]"
                        :class="ganado ? 'bg-[#4CAF50] text-white' : 'bg-oxido text-white'">{{ ganado ? '¬°Adivinaste!' :
                        '¬°Era √©l!' }}</span>
                </div>


                <!-- Info del gato -->
                <div class="p-6 md:p-8 flex flex-col justify-center flex-1">
                    <p class="font-lilita text-[1.75rem] md:text-[2.25rem] text-negro mb-1">{{ gatoActual.nombre }}</p>
                    <p class="text-[0.8125rem] md:text-sm font-black uppercase text-gris tracking-wider mb-4">{{
                        gatoActual.meta }}
                    </p>
                    <p class="text-sm md:text-base text-marron font-semibold leading-relaxed mb-6">{{
                        gatoActual.descripcion }}
                    </p>

                    <!-- Botones -->
                    <div class="flex gap-4 flex-wrap mt-auto">
                        <button
                            class="flex-1 bg-oxido text-blanco border-[3px] border-negro rounded-xl py-3 px-6 font-nunito font-black text-sm md:text-base cursor-pointer shadow-[4px_4px_0_#1C1410] transition-all duration-150 hover:-translate-x-0.5 hover:-translate-y-0.5 hover:shadow-[6px_6px_0_#1C1410] hover:bg-ambar hover:text-negro"
                            @click="reiniciarJuego">Jugar de nuevo üîÑ</button>
                        <a :href="PREFIJO_RUTA_GLOBAL + 'catalogo/index.html'"
                            class="flex-1 text-center bg-crema text-negro border-[3px] border-negro rounded-xl py-3 px-6 font-nunito font-black text-sm md:text-base cursor-pointer shadow-[4px_4px_0_#1C1410] no-underline transition-all duration-150 hover:-translate-x-0.5 hover:-translate-y-0.5 hover:shadow-[6px_6px_0_#1C1410] hover:bg-miel">Ver
                            cat√°logo üê±</a>
                    </div>
                </div>
            </div>

            <!-- Pista contextual -->
            <div class="mb-5 text-center">
                <span class="text-xs font-black uppercase text-gris tracking-wider mr-2">üêæ Pista:</span>
                <span
                    class="inline-block bg-turquesa border-[3px] border-negro rounded-xl py-1.5 px-4 font-nunito font-black text-[0.8125rem] uppercase tracking-wider text-negro shadow-[3px_3px_0_#1C1410] transform-none">{{
                    categoriaActual }}</span>
            </div>

            <!-- Mensaje -->
            <div v-if="mensaje"
                class="font-lilita text-[1.375rem] text-center py-4 px-7 border-[4px] border-negro rounded-2xl shadow-[5px_5px_0_#1C1410] mb-4"
                :class="{'bg-[#4CAF50] text-white': tipoMensaje === 'ganaste', 'bg-oxido text-white': tipoMensaje === 'perdiste', 'bg-miel text-negro': tipoMensaje === 'info'}">
                {{ mensaje }}
            </div>

            <!-- Grilla del Wordle -->
            <div class="flex flex-col gap-2 mb-6">
                <div v-for="(fila, f) in grilla" :key="f" class="flex gap-2">
                    <div v-for="(celda, c) in fila" :key="c"
                        class="w-12 h-12 sm:w-[3.75rem] sm:h-[3.75rem] border-[4px] border-negro rounded-xl flex items-center justify-center font-lilita text-xl sm:text-[1.625rem] font-black uppercase shadow-[4px_4px_0_#1C1410] transition-all duration-200"
                        :class="{
              'bg-[#4CAF50] text-white border-[#388E3C]': celda.estado === 'correcta',
              'bg-ambar text-white border-oxido': celda.estado === 'presente',
              'bg-gris text-white border-marron':  celda.estado === 'ausente',
              'bg-blanco text-negro': celda.estado === '',
              'border-oxido shadow-[4px_4px_0_var(--tw-colors-oxido)] scale-105': f === intentoActual && celda.letra !== '' && celda.estado === ''}">
                        {{ celda.letra }}
                    </div>
                </div>
            </div>

            <!-- Leyenda -->
            <aside class="flex gap-4 flex-wrap justify-center mb-5" aria-label="Leyenda">
                <div class="flex items-center gap-1.5 text-[0.8125rem] font-bold text-negro">
                    <div
                        class="w-7 h-7 border-[3px] border-negro rounded-md flex items-center justify-center text-[0.625rem] font-black text-white bg-[#4CAF50]">
                        A</div>
                    <span>Posici√≥n correcta</span>
                </div>
                <div class="flex items-center gap-1.5 text-[0.8125rem] font-bold text-negro">
                    <div
                        class="w-7 h-7 border-[3px] border-negro rounded-md flex items-center justify-center text-[0.625rem] font-black text-white bg-ambar">
                        B</div>
                    <span>Est√° en la palabra</span>
                </div>
                <div class="flex items-center gap-1.5 text-[0.8125rem] font-bold text-negro">
                    <div
                        class="w-7 h-7 border-[3px] border-negro rounded-md flex items-center justify-center text-[0.625rem] font-black text-white bg-gris">
                        C</div>
                    <span>No est√° en la palabra</span>
                </div>
            </aside>

            <!-- Teclado virtual -->
            <div class="flex flex-col gap-2 items-center mb-6" v-if="!juegoTerminado">
                <div v-for="(fila, i) in filasletras" :key="i" class="flex gap-1.5">
                    <button v-if="i === 2"
                        class="border-[3px] border-negro rounded-lg bg-blanco text-negro font-nunito font-black uppercase cursor-pointer shadow-[3px_3px_0_#1C1410] transition-all duration-100 hover:-translate-x-[1px] hover:-translate-y-[1px] hover:shadow-[4px_4px_0_#1C1410] active:translate-x-[1px] active:translate-y-[1px] active:shadow-[2px_2px_0_#1C1410] min-w-[1.75rem] sm:min-w-[2.25rem] py-[0.625rem] px-1.5 sm:py-3 sm:px-4 text-[0.8125rem]"
                        @click="borrar">‚å´</button>
                    <button v-for="letra in fila" :key="letra"
                        class="border-[3px] border-negro rounded-lg font-nunito font-black uppercase cursor-pointer shadow-[3px_3px_0_#1C1410] transition-all duration-100 hover:-translate-x-[1px] hover:-translate-y-[1px] hover:shadow-[4px_4px_0_#1C1410] active:translate-x-[1px] active:translate-y-[1px] active:shadow-[2px_2px_0_#1C1410] min-w-[1.75rem] sm:min-w-[2.25rem] py-[0.625rem] px-1.5 sm:py-3 sm:px-2.5 text-[0.8125rem] sm:text-sm"
                        :class="{
                        'bg-[#4CAF50] text-white border-[#388E3C]': estadosTeclas[letra] === 'correcta',
                        'bg-ambar text-white border-oxido': estadosTeclas[letra] === 'presente',
                        'bg-gris text-white border-marron': estadosTeclas[letra] === 'ausente',
                        'bg-blanco text-negro': !estadosTeclas[letra]
                    }" @click="ingresarLetra(letra)">{{ letra }}</button>
                    <button v-if="i === 2"
                        class="border-[3px] border-negro rounded-lg bg-blanco text-negro font-nunito font-black uppercase cursor-pointer shadow-[3px_3px_0_#1C1410] transition-all duration-100 hover:-translate-x-[1px] hover:-translate-y-[1px] hover:shadow-[4px_4px_0_#1C1410] active:translate-x-[1px] active:translate-y-[1px] active:shadow-[2px_2px_0_#1C1410] min-w-[1.75rem] sm:min-w-[2.25rem] py-[0.625rem] px-1.5 sm:py-3 sm:px-4 text-[0.8125rem]"
                        @click="confirmarIntento">‚Üµ</button>
                </div>
            </div>

            <!-- Contador de intentos -->
            <div class="mt-5 text-sm font-extrabold text-gris" v-if="!juegoTerminado">
                Intento {{ intentoActual + 1 }} de {{ maxIntentos }}
            </div>
        </main>

        <componente-footer></componente-footer>
    </div>

</body>

</html>